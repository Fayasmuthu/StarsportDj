{% extends 'web/partials/base.html' %}
{% load static %}
{% block content %}
  <main>
    <section class="mt-8">
      <div class="container">
        <div class="hero-slider">
          <div style="background: url({% static 'web/assets/images/slider/1.png' %})no-repeat; background-size: cover; border-radius: .5rem; background-position: center;">
            <div class="ps-lg-12 py-lg-16 col-xxl-5 col-lg-7 col-md-8 py-14 px-8 text-xs-center">
              <h1 class="text-white display-7 fw-bold mt-4">STARSPORT SPECIAL OFFER</h1>
              <p class="lead text-white">GRAP YOUR BICYCLE WITH EASY EMI OPTIONS</p>
              <a href="{% url "web:shop" %}" class="btn btn-dark mt-3">Shop Now <i class="feather-icon icon-arrow-right ms-1"></i></a>
            </div>
          </div>
          <div class="" style="background: url({% static 'web/assets/images/slider/2.png' %})no-repeat; background-size: cover; border-radius: .5rem; background-position: center;">
            <div class="ps-lg-12 py-lg-16 col-xxl-5 col-lg-7 col-md-8 py-14 px-8 text-xs-center">
            
              <a href="{% url "web:shop" %}" class="btn btn-dark mt-3">Shop Now <i class="feather-icon icon-arrow-right ms-1"></i></a>
            </div>
          </div>
          <div class="" style="background: url({% static 'web/assets/images/slider/3.png' %})no-repeat; background-size: cover; border-radius: .5rem; background-position: center;">
            <div class="ps-lg-12 py-lg-16 col-xxl-5 col-lg-7 col-md-8 py-14 px-8 text-xs-center">
              <h1 class="text-dark display-7 fw-bold mt-4">STARSPORT SPECIAL OFFER</h1>
              <p class="lead">GRAP YOUR SPORT WITH EASY EMI OPTIONS</p>
              <a href="{% url "web:shop" %}" class="btn btn-dark mt-3">Shop Now <i class="feather-icon icon-arrow-right ms-1"></i></a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <div class="mt-lg-12 mb-lg-14 mb-8">
      <!-- container -->
      <div class="container">
        <!-- row -->
        <div class="row">
          <!-- col -->
          <aside class="col-xl-3 col-lg-4 col-md-4 mb-6 mb-md-0">
            <div id="sidebar">
              <div class="sidebar__inner">
                <div class="offcanvas offcanvas-start offcanvas-collapse" tabindex="-1" id="offcanvasCategory" aria-labelledby="offcanvasCategoryLabel">
                  <div class="offcanvas-header d-lg-none">
                    <h5 class="offcanvas-title" id="offcanvasCategoryLabel">Filter</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                  </div>
                  <div class="offcanvas-body p-lg-0">
                    <div class="mb-4">
                      <!-- title -->
                      <h3 class="mb-4 h5">Categories</h3>
                      <!-- nav -->
                      <div class="card">
                        <ul class="nav nav-category" id="categoryCollapseMenu">
                          {% for category in categories %}
                          <li class="nav-item border-bottom w-100 collapsed px-4 py-1">
                            <a href="javascript:void(0)" class="nav-link" data-bs-toggle="collapse" data-bs-target="#{{ category.slug }}" aria-expanded="false" aria-controls="{{ category.slug }}">
                              <span class="d-flex align-items-center">
                                <i class="{{ category.icon }}" style="color: #1d8500;"></i>
                                <span class="ms-2">{{ category.name }}</span>
                              </span><i class="feather-icon icon-chevron-right"></i>
                            </a>
                            <!-- accordion collapse -->
                            <div id="{{ category.slug }}" class="accordion-collapse collapse" data-bs-parent="#categoryCollapseMenu">
                              <div>
                                <!-- nav -->
                                <ul class="nav flex-column ms-8">
                                  {% for subcategory in category.subcategory_set.all %}
                                  <li class="nav-item">
                                    <a href="{% url "web:shop" %}?subcategory={{ subcategory.slug }}" class="nav-link">{{ subcategory.name }}</a>
                                  </li>
                                  {% endfor %}
                                </ul>
                              </div>
                            </div>
                          </li>
                          <!-- nav item -->
                          {% endfor %}
                        </ul>
                      </div>
                    </div>

                    <div class="card mb-6">
                      <div class="card-body d-flex align-items-center">
                        <div class="">
                          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="var(--fc-primary)" class="bi bi-phone" viewBox="0 0 16 16">
                            <path d="M11 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h6zM5 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H5z" />
                            <path d="M8 14a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" />
                          </svg>
                        </div>
                        <div class="ms-3">
                          <p class="mb-0 small">Download the FreshCart App to your Phone.</p>
                        </div>
                      </div>
                      <div class="card-body d-flex align-items-center border-top">
                        <div class="">
                          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="var(--fc-primary)" class="bi bi-reply" viewBox="0 0 16 16">
                            <path d="M6.598 5.013a.144.144 0 0 1 .202.134V6.3a.5.5 0 0 0 .5.5c.667 0 2.013.005 3.3.822.984.624 1.99 1.76 2.595 3.876-1.02-.983-2.185-1.516-3.205-1.799a8.74 8.74 0 0 0-1.921-.306 7.404 7.404 0 0 0-.798.008h-.013l-.005.001h-.001L7.3 9.9l-.05-.498a.5.5 0 0 0-.45.498v1.153c0 .108-.11.176-.202.134L2.614 8.254a.503.503 0 0 0-.042-.028.147.147 0 0 1 0-.252.499.499 0 0 0 .042-.028l3.984-2.933zM7.8 10.386c.068 0 .143.003.223.006.434.02 1.034.086 1.7.271 1.326.368 2.896 1.202 3.94 3.08a.5.5 0 0 0 .933-.305c-.464-3.71-1.886-5.662-3.46-6.66-1.245-.79-2.527-.942-3.336-.971v-.66a1.144 1.144 0 0 0-1.767-.96l-3.994 2.94a1.147 1.147 0 0 0 0 1.946l3.994 2.94a1.144 1.144 0 0 0 1.767-.96v-.667z" />
                          </svg>
                        </div>
                        <div class="ms-3">
                          <p class="mb-0 small">Return Policy customers can return a product and ask for a refund.</p>
                        </div>
                      </div>
                      <div class="card-body d-flex align-items-center border-top">
                        <div class="">
                          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="var(--fc-primary)" class="bi bi-bag-check" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M10.854 8.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708 0z" />
                            <path d="M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1zm3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5zM2 5h12v9a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V5z" />
                          </svg>
                        </div>
                        <div class="ms-3">
                          <p class="mb-0 small">Order now so you don t miss the opportunities.</p>
                        </div>
                      </div>
                      <div class="card-body d-flex align-items-center border-top">
                        <div class="">
                          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="var(--fc-primary)" class="bi bi-clock-history" viewBox="0 0 16 16">
                            <path d="M8.515 1.019A7 7 0 0 0 8 1V0a8 8 0 0 1 .589.022l-.074.997zm2.004.45a7.003 7.003 0 0 0-.985-.299l.219-.976c.383.086.76.2 1.126.342l-.36.933zm1.37.71a7.01 7.01 0 0 0-.439-.27l.493-.87a8.025 8.025 0 0 1 .979.654l-.615.789a6.996 6.996 0 0 0-.418-.302zm1.834 1.79a6.99 6.99 0 0 0-.653-.796l.724-.69c.27.285.52.59.747.91l-.818.576zm.744 1.352a7.08 7.08 0 0 0-.214-.468l.893-.45a7.976 7.976 0 0 1 .45 1.088l-.95.313a7.023 7.023 0 0 0-.179-.483zm.53 2.507a6.991 6.991 0 0 0-.1-1.025l.985-.17c.067.386.106.778.116 1.17l-1 .025zm-.131 1.538c.033-.17.06-.339.081-.51l.993.123a7.957 7.957 0 0 1-.23 1.155l-.964-.267c.046-.165.086-.332.12-.501zm-.952 2.379c.184-.29.346-.594.486-.908l.914.405c-.16.36-.345.706-.555 1.038l-.845-.535zm-.964 1.205c.122-.122.239-.248.35-.378l.758.653a8.073 8.073 0 0 1-.401.432l-.707-.707z" />
                            <path d="M8 1a7 7 0 1 0 4.95 11.95l.707.707A8.001 8.001 0 1 1 8 0v1z" />
                            <path d="M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z" />
                          </svg>
                        </div>
                        <div class="ms-3">
                          <p class="mb-0 small">Your order will arrive at your door in 15 minutes.</p>
                        </div>
                      </div>
                    </div>
                    <div class="mb-8">
                      <!-- title -->
                      <h5 class="mb-3">Testimonials</h5>

                      <div class="card bg-light-warning border-0">
                        <div class="card-body p-5">
                          <h6>The Best Grocery Store Design</h6>
                          <p>Lorem ipsum dolor sit amet, consectetur adipis cing elit. Curabitur iaculis maximus purus, a gravida dui tempor eget.</p>
                          <div class="d-flex align-items-center">
                            <div class="">
                              <img src="../assets/images/avatar/avatar-1.jpg" alt="" class="avatar avatar-md rounded-circle" />
                            </div>
                            <div class="ms-3 lh-1">
                              <h6 class="mb-0">Alishia Jones</h6>
                              <small>Sales Manager</small>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </aside>
          <div class="col-xl-9 col-lg-8 col-md-12 mb-6 mb-md-0">
            <div class="mb-12 product-content">
              <div class="mb-6">
                <h3 class="mb-0">New Arrivals</h3>
              </div>
              <div class="product-slider-four-column">
                {% for product in popular_products %}
                {% include "web/include/index_product.html" %}
                {% endfor %} 
            </div>
            <div class="mb-6">
              <div class="mb-6">
                <h3 class="mb-1">Deal of the day</h3>
                <p>Brings to users an array of discounts on a variety</p>
              </div>
              <div class="card border border-danger p-6">
                {% for offer in offers %}
                <div class="row">
                  <div class="col-lg-5 text-center">
                    <a href="pages/shop-single.html"><img src="{{ offer.image.url }}" alt="Grocery Ecommerce Template" class="img-fluid" /></a>
                  </div>
                  <div class="col-lg-7 text-center text-lg-start">
                    <div class="mb-3">
                      <small class="text-warning">
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-half"></i>
                      </small>
                      <span><small>4.5</small></span>
                    </div>
                    <h2 class="fs-4"><a href="pages/shop-single.html" class="text-inherit text-decoration-none">{{ offer.title }}</a></h2>

                    <div class="d-flex justify-content-center align-items-center justify-content-lg-between mt-3">
                      <div>
                        <span class="text-dark fs-5 fw-bold">₹{{ offer.offer}}</span> <span class="text-decoration-line-through text-muted fs-5">₹150</span>
                      </div>
                    </div>
                    <div class="mt-2">
                      <a href="javascript:void(0)" class="btn btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus">
                          <line x1="12" y1="5" x2="12" y2="19"></line>
                          <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>Add to cart
                      </a>
                    </div>
                    <div class="mt-6 mb-6">
                      <div class="d-flex justify-content-between mb-2">
                        <span>Already Sold: <span class="text-dark fs-6 fw-bold">45</span></span>
                        <span>Available: <span class="text-dark fs-6 fw-bold">25</span></span>
                      </div>

                      <div class="progress bg-light-danger" role="progressbar" aria-label="Example 1px high" aria-valuenow="85" aria-valuemin="0" aria-valuemax="100" style="height: 5px">
                        <div class="progress-bar bg-danger" style="width: 85%"></div>
                      </div>
                    </div>
                    <p class="fw-bold text-dark mb-0">Hurry up offer ends soon</p>
                    <div class="d-flex justify-content-center justify-content-lg-start text-center mt-1">
                      <div class="deals-countdown" data-countdown="2024/10/10 00:00:00"></div>
                    </div>
                  </div>
                </div>
                {% endfor %}
              </div>
            </div>
            <div class="bg-light-danger text-danger p-4 rounded bg-opacity-50 text-center mb-12 d-flex align-items-center justify-content-center">
              <p class="mb-0">
                First time here? Get 10% off your first order!<span class="link-danger link-underline-danger">Click here</span>
              </p>
              <span class="border-dashed border-danger py-1 px-3 text-danger rounded bg-light-danger ms-4">FIRSTTIME10</span>
            </div>
            <div class="row">
              <div class="col-12">
                <div class="row align-items-center mb-6">
                  <div class="col-xl-10 col-lg-9 col-8">
                    <div class="mb-4 mb-lg-0">
                      <h3 class="mb-1">New Products</h3>
                      <p class="mb-0">New products with updated stocks.</p>
                    </div>
                  </div>
                  <div class="col-xl-2 col-lg-3 col-4 text-end">
                    <a href="#" class="btn btn-light">View All</a>
                  </div>
                </div>
                <div class="row row-cols-xl-4 row-cols-lg-3 g-4">
                  {% for product in best_seller_products %}
                  <div class="col">
                    <div class="mb-6">
                      <!-- card -->
                      <div class="card card-product mb-4">
                        <div class="card-body text-center py-8">
                          <!-- img -->
                          <a href="{{ product.get_absolute_url }}"><img src="{{ product.image.url}}" alt="Grocery Ecommerce Template" class="mb-3" /></a>
                          <!-- text -->
                        </div>
                      </div>
                      <div>
                        <span class="badge bg-danger rounded-pill">
                          {% if product.get_offer_percent_first %}
                          {{product.get_offer_percent_first|floatformat:2}}%
                          {% endif %}

                          {% if product.get_offer_percent_first_t %}
                          {{product.get_offer_percent_first_t|floatformat:2}}%
                          {% endif %}
                        </span>
                        <h2 class="mt-3 fs-6"><a href="#" class="text-inherit">Salted Instant Popcorn</a></h2>
                        <div>
                          <span class="text-dark fs-5 fw-bold">
                            {% if product.get_sale_price %}
                            ₹{{ product.get_sale_price|floatformat:0  }}
                            {% endif %}
              
                            {% if product.get_sale_price_t %}
                            ₹{{ product.get_sale_price_t|floatformat:0 }}
                            {% endif %}
                          </span> 
                          <span class="text-decoration-line-through text-muted">
                            {% if product.get_regular_price %}
                            ₹{{ product.get_regular_price|floatformat:0 }}
                            {% endif %}
              
                            {% if product.get_regular_price_t %}
                            ₹{{ product.get_regular_price_t|floatformat:0 }}
                            {% endif %}
                          </span>
                        </div>
                        <div class="text-warning">
                          <!-- rating -->
                          <small>
                            {% for star in "12345" %}
                            {% if star|add:0 <= product.rating %}
                            <i class="bi bi-star-fill"></i>
                            {% else %}
                            <i class="bi bi-star"></i>
                            {% endif %}
                          {% endfor %}
                          </small> <span class="text-muted small">({{product.rating}})</span>
                        </div>
                      </div>
                    </div>
                  </div>
                  {% endfor %}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Modal -->
  {% for product in popular_products %}
  <div class="modal fade" id="quickViewModal-{{ product.id }}" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-body p-8">
          <div class="position-absolute top-0 end-0 me-3 mt-3">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="row">
            <div class="col-lg-6">
              <!-- img slide -->
              <div class="product productModal" id="productModal">

              {% for i in product.get_images %}
              <div class="zoom" onmousemove="zoom(event)"
                style="background-image: url({{i.image.url}})">
                <!-- img -->
                <img src="{{i.image.url}}" alt="{{product.name}}">
              </div>
              {% endfor %}
                
              </div>
              <!-- product tools -->
              <div class="product-tools">
                <div class="thumbnails row g-3" id="productModalThumbnails">
                  {% comment %} <div class="col-3" class="tns-nav-active">
                    <div class="thumbnails-img">
                      <!-- img -->
                      <img src="../assets/images/products/product-single-img-1.jpg" alt="" />
                    </div>
                  </div> {% endcomment %}
                  {% for i in product.get_images %}              
                  <div class="col-3">
                    <div class="thumbnails-img">
                      <!-- img -->
                      <img src="{{i.image.url}}" alt="">
                    </div>
                  </div>
                  {% endfor %} 
                </div>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="ps-lg-8 mt-6 mt-lg-0">
                <a href="#!" class="mb-4 d-block">Bakery Biscuits</a>
                <h2 class="mb-1 h1">Napolitanke Ljesnjak</h2>
                <div class="mb-4">
                  <small class="text-warning">
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-half"></i>
                  </small><a href="#" class="ms-2">(30 reviews)</a>
                </div>
                <div class="fs-4">
                  <span class="fw-bold text-dark">₹32</span>
                  <span class="text-decoration-line-through text-muted">₹35</span><span><small class="fs-6 ms-2 text-danger">26% Off</small></span>
                </div>
                <hr class="my-6" />
                <div class="mb-4">
                  <button type="button" class="btn btn-outline-secondary">250g</button>
                  <button type="button" class="btn btn-outline-secondary">500g</button>
                  <button type="button" class="btn btn-outline-secondary">1kg</button>
                </div>
                <div>
                  <!-- input -->
                  <!-- input -->
                  <div class="input-group input-spinner">
                    <input type="button" value="-" class="button-minus btn btn-sm" data-field="quantity" />
                    <input type="number" step="1" max="10" value="1" name="quantity" class="quantity-field form-control-sm form-input" />
                    <input type="button" value="+" class="button-plus btn btn-sm" data-field="quantity" />
                  </div>
                </div>
                <div class="mt-3 row justify-content-start g-2 align-items-center">
                  <div class="col-lg-4 col-md-5 col-6 d-grid">
                    <!-- button -->
                    <!-- btn -->
                    <button type="button" class="btn btn-primary"><i class="feather-icon icon-shopping-bag me-2"></i>Add to cart</button>
                  </div>
                  <div class="col-md-4 col-5">
                    <!-- btn -->
                    <a class="btn btn-light" href="#" data-bs-toggle="tooltip" data-bs-html="true" aria-label="Compare"><i class="bi bi-arrow-left-right"></i></a>
                    <a class="btn btn-light" href="#!" data-bs-toggle="tooltip" data-bs-html="true" aria-label="Wishlist"><i class="feather-icon icon-heart"></i></a>
                  </div>
                </div>
                <hr class="my-6" />
                <div>
                  <table class="table table-borderless">
                    <tbody>
                      <tr>
                        <td>Product Code:</td>
                        <td>FBB00255</td>
                      </tr>
                      <tr>
                        <td>Availability:</td>
                        <td>In Stock</td>
                      </tr>
                      <tr>
                        <td>Type:</td>
                        <td>Fruits</td>
                      </tr>
                      <tr>
                        <td>Shipping:</td>
                        <td>
                          <small>01 day shipping.<span class="text-muted">( Free pickup today)</span></small>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
{% endblock %}
